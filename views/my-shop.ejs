<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>my shop</title>
    <link rel="stylesheet" href="/css_folder/register_page.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" 
       integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" 
       crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <header>
    <div class="top">
      <div class="logo">
        <a href="/">
          <img src="/public/icon_images/Logo_2.png" alt="eas logo" width="250px" height="37px">
        </a>
      </div>
  </header>

  <main>
    <h1>My Shop</h1>

<% products.forEach(function(product) { %>
  <div class="product-container" style="border: 1px solid #ccc; margin-bottom: 20px; padding: 15px;">
    <h2><%= product.name %></h2>
    
    <div class="product-images">
      <h4>Images:</h4>
      <div class="image-gallery" style="display: flex; flex-wrap: wrap; gap: 10px;">
        <% if (product.photos && product.photos.length > 0) { %>
          <% product.photos.forEach(function(photo) { %>
            <img src="<%= photo %>" alt="<%= product.name %>" style="width: 200px; height: auto; object-fit: cover;">
          <% }); %>
        <% } else { %>
          <p>No images available</p>
        <% } %>
      </div>
    </div>

    <div class="product-details">
      <p><strong>Type:</strong> <%= product.type %></p>
      <p><strong>Brand:</strong> <%= product.brand %></p>
      <p><strong>Model:</strong> <%= product.model %></p>
      <p><strong>Year:</strong> <%= product.year %></p>
      <p><strong>Description:</strong> <%= product.description %></p>
      <p><strong>Condition:</strong> <%= product.condition %></p>
      <p><strong>Price:</strong> <%= product.price %></p>
      <p><strong>WhatsApp:</strong> <%= product.whatsapp %></p>
      <p><strong>Telephone:</strong> <%= product.telephone %></p>
      <p><strong>Location:</strong> <%= product.location %></p>
      <p><strong>Status:</strong> 
        <% if (product.status) { %>
          <span style="color: <%= product.status === 'approved' ? 'green' : (product.status === 'denied' ? 'red' : 'orange') %>;">
            <%= product.status.charAt(0).toUpperCase() + product.status.slice(1) %>
          </span>
        <% } else { %>
          <span style="color: gray;">Awaiting Approval</span>
        <% } %>
      </p>
      <% if (product.status === 'denied' && product.denialReason) { %>
        <p><strong>Denial Reason:</strong> <%= product.denialReason %></p>
      <% } %>
    </div>
  </div>
<% }); %>
  </main>

  <footer>
    <div class="mainft">
      <div class="socials">
        <p style="color: rgb(27, 151, 48);">Socials</p>
        <a href="">
          <p><i class="fa-brands fa-instagram"></i></p>
        </a>
        <a href="">
          <p><i class="fa-brands fa-facebook"></i></p>
        </a>
        <a href="">
          <p><i class="fa-brands fa-facebook-messenger"></i></p>
        </a>
        <a href="">
          <p><i class="fa-brands fa-x-twitter"></i></p>
        </a>
        <a href="">
          <p><i class="fa-brands fa-youtube"></i></p>
        </a>
        <a href="" style="text-decoration: none; font-size: 14px;">
          <p class="blog">Our Blog</p>
        </a>
      </div>
        <div class="contact">
          <p style="color: rgb(27, 151, 48);">Contact</p>
          <a href="">
            <i class="fa-brands fa-whatsapp"></i> +(234) 802 496 3039
          </a>
          <a href="">
            <i class="fa-solid fa-phone"></i> +(234) 814 6922 131
          </a>
        </div>
        <div class="about">
          <p style="color:  rgb(27, 151, 48);">About us</p>
          <p>About <span style="font-style: italic; color: aqua;"><a href="fdgfg" class="legal_pg" style="color: var(--BG-COLOR);">e-autopartstore</a></span></p>
          <p><a href="" class="legal_pg">Terms & Conditions</a></p>
          <p><a href="" class="legal_pg">Privacy Policy</a></p>
          <p><a href="" class="legal_pg">Billing Policy</a></p>
          <p><a href="" class="legal_pg">Cookie Policy</a></p>
          <p><a href="" class="legal_pg">Copyright Infringement Policy</a></p>  
        </div>
      </div> 
      <div class="ftft">
        <p><em>@2024 e-autopartstore</em></p>
      </div>
  </footer>

  <script>
  // Add this if you want real-time updates without page refresh
  function checkProductStatus() {
      $.get('/my-shop', function(products) {
          products.forEach(product => {
              $(`.product-item[data-id="${product.productId}"] .product-status`).text(product.status);
          });
      });
  }
  
  // Check status every 30 seconds
  setInterval(checkProductStatus, 30000);
  </script>

</body>
</html>
